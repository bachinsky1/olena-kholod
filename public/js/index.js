/*! For license information please see index.js.LICENSE.txt */
(()=>{"use strict";var t={866:(t,e,n)=>{n.r(e),n.d(e,{BrowserHistoryEngine:()=>y,compose:()=>$,createRouter:()=>S,pipe:()=>L});var r=function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};function o(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n((function(e){e(t.value)})).then(a,c)}u((r=r.apply(t,e||[])).next())}))}function i(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}var a=function t(e,n,r){return e instanceof RegExp?function(t,e){if(!e)return t;var n=t.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return t}(e,n):Array.isArray(e)?function(e,n,r){for(var o=[],i=0;i<e.length;i++)o.push(t(e[i],n,r).source);return new RegExp("(?:"+o.join("|")+")",v(r))}(e,n,r):function(t,e,n){return w(f(t,n),e,n)}(e,n,r)},c=f,u=p,s=w,l="/",d=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function f(t,e){for(var n,r=[],o=0,i=0,a="",c=e&&e.delimiter||l,u=e&&e.whitelist||void 0,s=!1;null!==(n=d.exec(t));){var f=n[0],p=n[1],v=n.index;if(a+=t.slice(i,v),i=v+f.length,p)a+=p[1],s=!0;else{var w="",m=n[2],y=n[3],b=n[4],x=n[5];if(!s&&a.length){var E=a.length-1,S=a[E];(!u||u.indexOf(S)>-1)&&(w=S,a=a.slice(0,E))}a&&(r.push(a),a="",s=!1);var $="+"===x||"*"===x,C="?"===x||"*"===x,L=y||b,T=w||c;r.push({name:m||o++,prefix:w,delimiter:T,optional:C,repeat:$,pattern:L?g(L):"[^"+h(T===c?T:T+c)+"]+?"})}}return(a||i<t.length)&&r.push(a+t.substr(i)),r}function p(t,e){for(var n=new Array(t.length),r=0;r<t.length;r++)"object"==typeof t[r]&&(n[r]=new RegExp("^(?:"+t[r].pattern+")$",v(e)));return function(e,r){for(var o="",i=r&&r.encode||encodeURIComponent,a=!r||!1!==r.validate,c=0;c<t.length;c++){var u=t[c];if("string"!=typeof u){var s,l=e?e[u.name]:void 0;if(Array.isArray(l)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but got array');if(0===l.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var d=0;d<l.length;d++){if(s=i(l[d],u),a&&!n[c].test(s))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'"');o+=(0===d?u.prefix:u.delimiter)+s}}else if("string"!=typeof l&&"number"!=typeof l&&"boolean"!=typeof l){if(!u.optional)throw new TypeError('Expected "'+u.name+'" to be '+(u.repeat?"an array":"a string"))}else{if(s=i(String(l),u),a&&!n[c].test(s))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but got "'+s+'"');o+=u.prefix+s}}else o+=u}return o}}function h(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function g(t){return t.replace(/([=!:$/()])/g,"\\$1")}function v(t){return t&&t.sensitive?"":"i"}function w(t,e,n){for(var r=(n=n||{}).strict,o=!1!==n.start,i=!1!==n.end,a=n.delimiter||l,c=[].concat(n.endsWith||[]).map(h).concat("$").join("|"),u=o?"^":"",s=0;s<t.length;s++){var d=t[s];if("string"==typeof d)u+=h(d);else{var f=d.repeat?"(?:"+d.pattern+")(?:"+h(d.delimiter)+"(?:"+d.pattern+"))*":d.pattern;e&&e.push(d),d.optional?d.prefix?u+="(?:"+h(d.prefix)+"("+f+"))?":u+="("+f+")?":u+=h(d.prefix)+"("+f+")"}}if(i)r||(u+="(?:"+h(a)+")?"),u+="$"===c?"$":"(?="+c+")";else{var p=t[t.length-1],g="string"==typeof p?p[p.length-1]===a:void 0===p;r||(u+="(?:"+h(a)+"(?="+c+"))?"),g||(u+="(?="+h(a)+"|"+c+")")}return new RegExp(u,v(n))}a.parse=c,a.compile=function(t,e){return p(f(t,e),e)},a.tokensToFunction=u,a.tokensToRegExp=s;var m={bindClick:!0},y=function(t){return void 0===t&&(t={}),function(){var e,n=r(r({},m),t),a=[],c=[],u=null,s=function(t){return o(void 0,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,a.reduce((function(e,n){return e.then((function(){return n(t)}))}),Promise.resolve())];case 1:return e.sent(),[2]}}))}))},l=function(t){return o(void 0,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,c.reduce((function(e,n){return e.then((function(){return n(t)}))}),Promise.resolve())];case 1:return e.sent(),[2]}}))}))},d=function(t){for(var n=t.target;n&&"A"!==n.nodeName.toUpperCase();)n=n.parentNode;if(n&&"A"===n.nodeName.toUpperCase()){if(n.hasAttribute("data-routerjs-ignore")||n.hasAttribute("download")||n.hasAttribute("target")||"external"===n.getAttribute("rel"))return;var r=n.getAttribute("href");if(r&&(function(t){return new URL(t,window.location.origin).origin!==window.location.origin}(r)||0===r.indexOf("mailto:")||0===r.indexOf("tel:")))return;t.preventDefault(),e.navigate(n.pathname)}},f=function(t){return o(void 0,void 0,void 0,(function(){var t;return i(this,(function(e){switch(e.label){case 0:return t=window.location.pathname,null===u?[3,2]:[4,l(u)];case 1:e.sent(),e.label=2;case 2:return u=t,[4,s(t)];case 3:return e.sent(),[2]}}))}))};return e={setup:function(){window.addEventListener("popstate",f),n.bindClick&&window.addEventListener("click",d)},teardown:function(){window.removeEventListener("popstate",f),window.removeEventListener("click",d)},addRouteChangeHandler:function(t){a.push(t)},addRouteExitHandler:function(t){c.push(t)},navigate:function(t){return o(void 0,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return""+window.location.pathname+window.location.search===t?[3,4]:null===u?[3,2]:[4,l(u)];case 1:e.sent(),e.label=2;case 2:return u=t,window.history.pushState({},"",t),[4,s(t)];case 3:e.sent(),e.label=4;case 4:return[2]}}))}))},back:function(){window.history.back()},forward:function(){window.history.forward()},go:function(t){window.history.go(t)},setLocation:function(t){window.location.pathname!==t&&window.history.pushState({},"",t)},run:function(t){var e=""+window.location.pathname+window.location.search,n=t||e;e!==n&&window.history.pushState({},"",n),s(n)}}}},b=/\/*$/,x=function(t){var e=function(n,a,c){return o(void 0,void 0,void 0,(function(){var o,u,s,l,d,f,p,h;return i(this,(function(i){switch(i.label){case 0:if(!(n.length>0))return[3,2];if(o=n[0],u={},s=[],l=c.split("?")[0],d=l.match(o.path)){for(f=0,f=0;f<o.paramNames.length;f++)u[o.paramNames[f].name]=d[f+1];if(f<d.length)for(p=f;p<d.length;p++)s.push(d[p])}return h=function(t){var e=t.path,n=t.params,o=t.splats,i=e.split("?"),a=(i[0],(i[1]||"").split("&").reduce((function(t,e){var n,o=e.split("="),i=o[0],a=o[1];return i?r(r({},t),((n={})[decodeURIComponent(i)]=decodeURIComponent(a),n)):t}),{})),c=!1,u={get:function(t,e){return u.params&&void 0!==u.params[t]?u.params[t]:u.query&&t in u.query?u.query[t]:void 0!==e?e:void 0},path:e,params:n,splats:o,query:a,stop:function(){c=!0},isStopped:function(){return c}};return u}({path:c,params:u,splats:s}),[4,o.callback(h,t)];case 1:if(i.sent(),!h.isStopped()&&n.length>1)return[2,e(n.slice(1),a,c)];i.label=2;case 2:return a.length>0?[4,a[0](t)]:[3,4];case 3:if(i.sent(),a.length>1)return[2,e([],a.slice(1),c)];i.label=4;case 4:return[2,Promise.resolve()]}}))}))};return e},E={ignoreCase:!1,basePath:"/",engine:y()},S=function(t){var e={routes:[],exits:[]},n=[],c=new Map,u=r(r({},E),t),s=u.engine(),l=u.basePath.replace(b,""),d=new RegExp("^"+l);c.set(500,[function(t,e){console&&console.error&&(console.error('500 - path: "'+e.path+'"'),console.error(t))}]),c.set(404,[function(t,e){console&&console.warn&&(console.warn('404 - path: "'+e.path+'"'),console.warn(t))}]);var f=function(t){return function(e){var n=e.statusCode,r=void 0===n?500:n,o=c.get(r),i=c.get("*");if(!o&&!i)throw e;o&&o.length>0&&o.forEach((function(n){n(e,t)})),i&&i.length>0&&i.forEach((function(n){n(e,t)}))}},p=function(t){return function(r){return o(void 0,void 0,void 0,(function(){var o,a,c,u,s,l,p,h,g;return i(this,(function(i){switch(i.label){case 0:for(o=e[t],a=[],c=""===(c=r.replace(d,""))?"/":c,u=""===(u=(u=r.split("?")[0]).replace(d,""))?"/":u,s=0,l=o.length;s<l;s++)o[s].path.test(u)&&a.push(s);return p=function(t){var e={path:t,set:function(t,n){e[t]=n}};return e}(c),"routes"!==t||0!==a.length?[3,1]:((h=new Error('Path "'+c+'" not matched')).statusCode=404,f(p)(h),[3,4]);case 1:return i.trys.push([1,3,,4]),[4,x(p)(a.map((function(t){return o[t]})),n,c)];case 2:return i.sent(),[3,4];case 3:return g=i.sent(),f(p)(g),[3,4];case 4:return[2]}}))}))}};s.setup(),s.addRouteChangeHandler(p("routes")),s.addRouteExitHandler(p("exits"));var h=function(t){return function(n,r){if(!r)throw new Error('Missing callback for path "'+n+'"');var o=e[t],i=[],c=a(n,i,{sensitive:!u.ignoreCase,strict:!1});o.push({url:n,path:c,paramNames:i,callback:r})}},g={get:function(t,e){return h("routes")(t,e),g},exit:function(t,e){return h("exits")(t,e),g},always:function(t){if(!t)throw new Error('A callback is mandatory when defining an "always" callback!');return n.push(t),g},error:function(t,e){return c.set(t,function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,c=i.length;a<c;a++,o++)r[o]=i[a];return r}(c.get(t)||[],[e])),g},run:function(t){return s.run(t),g},teardown:function(){return s.teardown(),g},navigate:s.navigate,go:s.go,back:s.back,forward:s.forward,setLocation:s.setLocation,buildUrl:function(t){return""+l+t},getOptions:function(){return r(r({},u),{basePath:l,engine:void 0})},_getOptions:function(){return console.warn("@deprecated _getOptions is deprecated, use getOptions instead"),g.getOptions()},_showRoutes:function(){console.log(e)}};return g};function $(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?function(t){return t}:1===t.length?t[0]:t.reduce((function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t(e.apply(void 0,n))}}))}var C=function(){},L=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return $.apply(void 0,t)(C)}},830:function(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}u((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const o=(0,n(866).createRouter)();let i=1|Number(localStorage.getItem("currentSortType")),a=1|Number(localStorage.getItem("currentCategory"));function c(t){return r(this,void 0,void 0,(function*(){const e=document.getElementById("goodsContainer");if(null===e)return;e.innerHTML="",t=window.location.origin+t;const n=document.getElementById("spinner");null==n||n.setAttribute("style","display: flex;");const r=yield fetch(t);return null==n||n.setAttribute("style","display: none !important;"),r.ok?yield r.json():(console.log("HTTP error: "+r.status),[])}))}function u(t){const e=window.location.origin+t;history.pushState(null,"",e),o.run()}function s(t){!function(){const t=document.getElementById("filter");t.innerHTML='\n        <option value="1" selected>Cheaper first</option>\n        <option value="2">Alphabetically</option>\n        <option value="3">New first</option>\n    ',t.selectedIndex=i-1}(),0!==t.categories.length&&(function(t){const e=document.getElementById("categoriesContainer");if(null===e)return;const n=document.createElement("div");n.classList.add("list-group");for(const e of t){const t=document.createElement("a");t.setAttribute("href","#"),t.classList.add("list-group-item","list-group-item-action"),t.innerHTML=e.name+` (${e.count})`,t.dataset.category_id=e.id.toString(),t.addEventListener("click",(t=>{t.target instanceof HTMLAnchorElement&&(a=Number(t.target.dataset.category_id),localStorage.setItem("currentCategory",a.toString()),localStorage.setItem("currentSortType",i.toString()),localStorage.setItem("currentCategory",a.toString()),u(`/categories/${a}/${i}`))})),n.appendChild(t)}e.innerHTML="",e.appendChild(n)}(t.categories),function(t){const e=document.getElementById("goodsContainer");if(null!==e){e.classList.add("row"),e.classList.add("row-cols-md-4"),e.innerHTML="";for(const n of t){const t=document.createElement("div");t.classList.add("col"),t.innerHTML=`\n            <div class="card mb-4">\n                <div class="card-body">\n                    <h5 class="card-title">${n.name}</h5>\n                    <p class="card-text">${n.description}</p>\n                    <p class="card-text">${n.price.toFixed(2)}</p>\n                    <p class="card-text"><small class="text-muted">Last updated ${n.date}</small></p>\n                    <a href="#" data-id="${n.id}" class="btn btn-primary">Buy this</a>\n                </div>\n            </div>`,null==e||e.appendChild(t)}}}(t.active))}u(`/categories/${a}/${i}`),o.get("/categories",(()=>r(void 0,void 0,void 0,(function*(){const t=yield c("/api/categories");s(t),console.log(t)})))),o.get("/categories/:id",((t,e)=>r(void 0,void 0,void 0,(function*(){const e=t.params.id.toString();s(yield c(`/api/categories/${e}/${i}`))})))),o.get("/categories/:id/:sort",((t,e)=>r(void 0,void 0,void 0,(function*(){const e=t.params.id.toString();s(yield c(`/api/categories/${e}/${i}`))})))),o.get("/",(()=>r(void 0,void 0,void 0,(function*(){s(yield c("/api/categories"))})))),function(){const t=document.getElementById("filter");t&&t.addEventListener("change",(t=>{const e=t.target,n=e.options[e.selectedIndex].value;i=Number(n),localStorage.setItem("currentSortType",i.toString()),u(`/categories/${a}/${i}`)}))}(),o.run()}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(830)})();